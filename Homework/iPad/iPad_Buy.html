<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple Demo</title>
    <link href="iPad.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

</head>
<body>
    <div class="global">
        <div class="global_right">
            <label for="colorSelection">外觀。 <span>挑選喜愛的顏色。</span></label>
            <div class="containers">
                <button type="button"  class="boxs btn btn-light" id="colorSelectionButton">
                    <div class="item">
                    <img alt="太空灰色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-space-gray-2022?wid=208&amp;hei=208&amp;fmt=png-alpha&amp;.v=1668014174971" class="form-selector-swatch">
                    <h4>太空灰色</h4></div>
                </button>
                <button type="button"  class="boxs btn btn-light" id="colorSelectionButton">
                    <img alt="藍色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-blue-2022?wid=208&amp;hei=208&amp;fmt=png-alpha&amp;.v=1668014174784" class="form-selector-swatch">
                    <h4>藍色</h4>
                </button>
                <button type="button"  class="boxs btn btn-light" id="colorSelectionButton">
                    <img alt="粉紅色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-pink-2022?wid=208&amp;hei=208&amp;fmt=png-alpha&amp;.v=1668014174903" class="form-selector-swatch">            
                    <h4>粉紅色</h4>
                </button>
                <button type="button"  class="boxs btn btn-light" id="colorSelectionButton">
                    <img alt="紫色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-purple-2022?wid=208&amp;hei=208&amp;fmt=png-alpha&amp;.v=1668014175042" class="form-selector-swatch">           
                    <h4>紫色</h4>
                </button>
                <button type="button" class="boxs btn btn-light" id="colorSelectionButton">
                    <img alt="星光色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-starlight-2022?wid=204&amp;hei=204&amp;fmt=png-alpha&amp;.v=1669672818453" class="form-selector-swatch">           
                    <h4>星光色</h4>
                </button>
            
                <label for="storageSelection">儲存裝置。 <span>選擇需要的儲存空間大小。</span></label>
                <button type="button" class="boxs btn btn-light" id="storageSelectionButton1">
                    <div class="item">
                    <h2>64GB</h2>
                    <h4 id="storageSelectionPrice1">NT$19,900 起</h4></div>
                </button>
                <button type="button" class="boxs btn btn-light" id="storageSelectionButton2">
                    <h2>256GB</h2>
                    <h4 id="storageSelectionPrice2">NT$24,900 起</h4>
                </button>
                

                <label for="connectSelection">連線能力。 <span>選擇連線方式。</span></label>
                <button type="button" class="box btn btn-light d-flex" id="connectSelectionButton">
                    <div class="item">
                        <h5>WiFi</h5>
                        <p style="font-size: 12px;">每部 iPad 都可連接到 Wi-Fi 網路，使你能保持連線。 </p>
                    </div>
                    <div class="ms-auto">
                        <h3 style="font-size: 22px;">NT$24,900</h3>
                    </div>
                </button>
                <button type="button" class="box btn btn-light d-flex" id="connectSelectionButton">
                    <div class="">
                        <h5>Wi-Fi + 行動網路</h5>
                        <p style="font-size: 12px;">Wi-Fi + 行動網路機型讓你在無法使用 Wi-Fi 時也能進行連線。 </p>
                    </div>
                    <div class="ms-auto">
                        <h3>NT$29,900</h3>
                    </div>
                </button>
                <div class="last">
                    <strong>想要進一步了解 Wi-Fi + 行動網路機型？</strong>
                    <p>如果現場沒有可供使用的 Wi-Fi，Wi-Fi + 行動網路機型可讓你透過行動網路數據方案保持連線。</p>
                    <span>購買 Wi-Fi + 行動網路機型後，需要設定行動網路連線。</span>
                </div> 
                <div class="price">
                    <div class="pricebox">
                        <h1>NT$<span id="f_price"></span>起</h1>
                    </div>
                </div>
            </div>
        </div>
        <div class="global_left">
            <div class="img">
                <div class="imgbox">
                    <img id="ipadimg" width="851" height="479" alt="iPad Air 的正面角度圖，後面是上市的其他五款顏色以扇形排列" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-unselect-gallery-1-202207?wid=5120&hei=2880&fmt=p-jpg&qlt=95&.v=1654902977555" srcset="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-unselect-gallery-1-202207?wid=2560&hei=1440&fmt=p-jpg&qlt=95&.v=1654902977555, https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-unselect-gallery-1-202207?wid=5120&hei=2880&fmt=p-jpg&qlt=95&.v=1654902977555 2x" class="rf-bfe-gallery-image" data-autom="galleryImage0">
                </div>
            </div>
        </div>
    </div>

    <script>
            //const url = "https://raw.githubusercontent.com/Halston1031/JavaScript/master/Homework/iPad/IPadAir.json";
            const url = "https://raw.githubusercontent.com/Halston1031/JavaScript/master/Homework/iPad/IPadAir.json"
            let ipadArray = []
            let xhr = new XMLHttpRequest();
            let btn = document.getElementById("btn")
            window.onload = requestIpadJson
    
            function requestIpadJson() {
                xhr.onload = function () {
                    ipadArray = this.response;
                    let colorbtn = document.querySelectorAll("#colorSelectionButton")
                    colorbtn.forEach((item) => {
                        item.addEventListener("click", function () {
                            let color = item.value
                            let img = ipadArray.filter(item => item.color == color)
                            console.log(color)
                            img.forEach(item => {
                                let ipadimg = document.getElementById("ipadimg")
                                ipadimg.src = ""
                                ipadimg.src = item.picture
                            })
    
                            let storebtn = document.querySelectorAll("#storageSelectionButton")
                            storebtn.forEach((item) => {
                                item.addEventListener("click", function () {
                                    let store = item.value
                                    console.log(store)
                                    let network = document.querySelectorAll("#connectSelectionButton")
                                    network.forEach((item) => {
                                        item.addEventListener("click", function () {
                                            let network = item.value
                                            console.log(network)
                                            let price = ipadArray.filter(item => item.color == color && item.storage == store && item.network == network)
                                            console.log(price)
                                            price.forEach(item => {
                                                let f_price = document.getElementById("f_price")
                                                f_price.innerHTML = `${item.price}`
                                            })
    
                                        })
                                    })
                                })
                            })
                        })
                    })
    
    
                }
    
                xhr.open("GET", url);
                xhr.responseType = "json";
                xhr.send();
            }
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

</body>
</html>