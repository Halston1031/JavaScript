<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple Demo</title>
    <link href="iPad.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

</head>
<body>
    <div class="global">
        <div class="global_right">
                <div class="containerColor">
                    <label for="colorSelection">外觀。 <span>挑選喜愛的顏色。</span></label>
                    <button class="boxs btn btn-light" value="太空灰色">
                        <div class="item">
                            <img alt="太空灰色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-space-gray-2022?wid=208&amp;hei=208&amp;fmt=png-alpha&amp;.v=1668014174971" class="form-selector-swatch">
                            <h4>太空灰色</h4>
                        </div>
                    </button>
                    <button class="boxs btn btn-light colorbtn" value="藍色">
                        <div class="item">
                            <img alt="藍色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-blue-2022?wid=208&amp;hei=208&amp;fmt=png-alpha&amp;.v=1668014174784" class="form-selector-swatch">
                            <h4>藍色</h4>
                        </div>
                    </button>
                    <button class="boxs btn btn-light colorbtn" value="粉紅色">
                        <div class="item">
                            <img alt="粉紅色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-pink-2022?wid=208&amp;hei=208&amp;fmt=png-alpha&amp;.v=1668014174903" class="form-selector-swatch">            
                            <h4>粉紅色</h4>
                        </div>
                    </button>
                    <button class="boxs btn btn-light colorbtn" value="紫色">
                        <div class="item">
                            <img alt="紫色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-purple-2022?wid=208&amp;hei=208&amp;fmt=png-alpha&amp;.v=1668014175042" class="form-selector-swatch">           
                            <h4>紫色</h4>
                        </div>
                    </button>
                    <button class="boxs btn btn-light colorbtn" value="星光色">
                        <div class="item">
                            <img alt="星光色" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-starlight-2022?wid=204&amp;hei=204&amp;fmt=png-alpha&amp;.v=1669672818453" class="form-selector-swatch">           
                            <h4>星光色</h4>
                        </div>
                    </button>
                </div>

                <div class="containerSelection">
                    <label for="storageSelection">儲存裝置。 <span>選擇需要的儲存空間大小。</span></label>
                    <div class="containerStorage">
                        <button type="button" class="boxs btn btn-light storagebtn" value="64GB">
                            <div class="item">
                            <h2>64GB</h2>
                            <h4>NT$19,900 起</h4>
                        </div>
                        </button>
                        <button type="button" class="boxs btn btn-light storagebtn" value="256GB">
                            <div class="item">
                                <h2>256GB</h2>
                                <h4>NT$24,900 起</h4>
                            </div>
                        </button>
                    </div>
                </div>
                
                <div class="containerConnection">
                    <label for="connectSelection">連線能力。 <span>選擇連線方式。</span></label>
                    <button type="button" class="box btn btn-light d-flex networkbtn" value="Wi-Fi">
                        <div class="item">
                            <div class="">
                                <h5>WiFi</h5>
                                <p style="font-size: 12px;">每部 iPad 都可連接到 Wi-Fi 網路，使你能保持連線。 </p>
                            </div>
                            <div class="ms-auto">
                                <h3 style="font-size: 22px;">NT$24,900</h3>
                            </div>
                        </div>
                    </button>
                    <button   type="button" class="box btn btn-light d-flex networkbtn" value="Wi-Fi+行動網路">
                        <div class="item">
                            <div class="">
                                <h5>Wi-Fi + 行動網路</h5>
                                <p style="font-size: 12px;">Wi-Fi + 行動網路機型讓你在無法使用 Wi-Fi 時也能進行連線。 </p>
                            </div>
                            <div class="ms-auto">
                                <h3 style="font-size: 22px;">NT$29,900</h3>
                            </div>
                        </div>
                    </button>
                    <div class="last">
                        <strong>想要進一步了解 Wi-Fi + 行動網路機型？</strong>
                        <p>如果現場沒有可供使用的 Wi-Fi，Wi-Fi + 行動網路機型可讓你透過行動網路數據方案保持連線。</p>
                        <span>購買 Wi-Fi + 行動網路機型後，需要設定行動網路連線。</span>
                    </div> 
                </div>
                <div class="price">
                    <div class="pricebox">
                        <h1>NT$<span id="expense"></span>起</h1>
                    </div>
                </div>
        </div>
        <div class="global_left">
            <div class="img">
                <img id="ipadImg" width="817" height="460" alt="iPad Air 的正面角度圖，後面是上市的其他五款顏色以扇形排列" src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-unselect-gallery-1-202207?wid=5120&hei=2880&fmt=p-jpg&qlt=95&.v=1654902977555" srcset="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-unselect-gallery-1-202207?wid=2560&hei=1440&fmt=p-jpg&qlt=95&.v=1654902977555, https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-finish-unselect-gallery-1-202207?wid=5120&hei=2880&fmt=p-jpg&qlt=95&.v=1654902977555 2x">
            </div>
        </div>
    </div>

    <script>
        //const url = "https://raw.githubusercontent.com/Halston1031/JavaScript/master/Homework/iPad/IPadAir.json";
        const url = "https://raw.githubusercontent.com/Halston1031/JavaScript/master/Homework/iPad/IPadAir.json";
        let ipadArray = []
        let xhr = new XMLHttpRequest();
        let btn = document.getElementById("btn")
        window.onload = requestIpadJson

        function requestIpadJson() {
            xhr.onload = function () {
                ipadArray = this.response;
                let Cbtn = document.querySelectorAll(".colorbtn")
                Cbtn.forEach((item) => {
                    item.addEventListener("click", function () {
                        let color = item.value
                        let img = ipadArray.filter(item => item.color == color)
                        console.log(color)
                        img.forEach(item => {
                            let ipadImg = document.getElementById("ipadImg")
                            ipadImg.src = item.picture
                        })

                        let Sbtn = document.querySelectorAll(".storagebtn")
                        Sbtn.forEach((item) => {
                            item.addEventListener("click", function () {
                                let storage = item.value
                                console.log(storage)
                                let network = document.querySelectorAll(".networkbtn")
                                network.forEach((item) => {
                                    item.addEventListener("click", function () {
                                        let network = item.value
                                        console.log(network)
                                        let price = ipadArray.filter(item => item.color == color && item.storage == storage && item.network == network)
                                        console.log(price)
                                        price.forEach(item => {
                                            let expense = document.getElementById("expense")
                                            expense.innerHTML = `${item.price}`
                                        })
                                    })
                                })
                            })
                        })
                    })
                })
            }

            xhr.open("GET", url, true);
            xhr.responseType = "json";
            xhr.send();
        }
    </script>
</body>
</html>